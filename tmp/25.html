
<span style="color:#ff40ff">&lt;?php</span>
<span style="color:#00ff00">class</span> TicTacToe <span style="color:#ff40ff">{</span>
        <span style="color:#ffff00">var</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span> <span style="color:#ffff00">=</span> <span style="color:#00ff00">array</span><span style="color:#ff40ff">(</span><span style="color:#ff6060">0</span>,<span style="color:#ff6060">0</span>,<span style="color:#ff6060">0</span>,<span style="color:#ff6060">0</span>,<span style="color:#ff6060">0</span>,<span style="color:#ff6060">0</span>,<span style="color:#ff6060">0</span>,<span style="color:#ff6060">0</span>,<span style="color:#ff6060">0</span><span style="color:#ff40ff">)</span>;
        <span style="color:#ffff00">var</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">turn</span> <span style="color:#ffff00">=</span> <span style="color:#ff6060">1</span>;

        <span style="color:#ff40ff">function</span> checkState<span style="color:#ff40ff">(){</span>
                <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span> <span style="color:#ffff00">=</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">this</span><span style="color:#00ff00">-&gt;</span>board;

                <span style="color:#8080ff">// Check across rows</span>
                <span style="color:#ffff00">for</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span> <span style="color:#ffff00">=</span> <span style="color:#ff6060">0</span>; <span style="color:#ffff00">$</span><span style="color:#00ffff">i</span> <span style="color:#ffff00">&lt;</span> <span style="color:#ff6060">7</span>; <span style="color:#ffff00">$</span><span style="color:#00ffff">i</span> <span style="color:#ffff00">=</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">i</span> <span style="color:#ffff00">+</span> <span style="color:#ff6060">3</span><span style="color:#ff40ff">){</span>
                        <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">!=</span><span style="color:#ffff00">=</span> <span style="color:#ff6060">0</span><span style="color:#ff40ff">){</span>
                                <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ffff00">+</span><span style="color:#ff6060">1</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">&amp;&amp;</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ffff00">+</span><span style="color:#ff6060">2</span><span style="color:#ff40ff">])</span> <span style="color:#ffff00">return</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ff40ff">]</span>;
                        <span style="color:#ff40ff">}</span>
                <span style="color:#ff40ff">}</span>

                <span style="color:#8080ff">// Check across columns</span>
                <span style="color:#ffff00">for</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span> <span style="color:#ffff00">=</span> <span style="color:#ff6060">0</span>; <span style="color:#ffff00">$</span><span style="color:#00ffff">i</span> <span style="color:#ffff00">&lt;</span> <span style="color:#ff6060">3</span>; <span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ffff00">++</span><span style="color:#ff40ff">){</span>
                        <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">!=</span><span style="color:#ffff00">=</span> <span style="color:#ff6060">0</span><span style="color:#ff40ff">){</span>
                                <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ffff00">+</span><span style="color:#ff6060">3</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">&amp;&amp;</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ffff00">+</span><span style="color:#ff6060">6</span><span style="color:#ff40ff">])</span> <span style="color:#ffff00">return</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">i</span><span style="color:#ff40ff">]</span>;
                        <span style="color:#ff40ff">}</span>
                <span style="color:#ff40ff">}</span>

                <span style="color:#8080ff">// Check diagonals</span>
                <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">4</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">!=</span><span style="color:#ffff00">=</span> <span style="color:#ff6060">0</span><span style="color:#ff40ff">){</span>
                        <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">0</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">4</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">&amp;&amp;</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">8</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">4</span><span style="color:#ff40ff">])</span> <span style="color:#ffff00">return</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">4</span><span style="color:#ff40ff">]</span>;
                        <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">2</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">4</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">&amp;&amp;</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">6</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">4</span><span style="color:#ff40ff">])</span> <span style="color:#ffff00">return</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">[</span><span style="color:#ff6060">4</span><span style="color:#ff40ff">]</span>;
                <span style="color:#ff40ff">}</span>

                <span style="color:#8080ff">// No winner found if there are still empty spots, game is still in progress</span>
                <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#00ffff">array_search</span><span style="color:#ff40ff">(</span><span style="color:#ff6060">0</span>, <span style="color:#ffff00">$</span><span style="color:#00ffff">board</span><span style="color:#ff40ff">)</span> <span style="color:#ffff00">!=</span><span style="color:#ffff00">=</span> <span style="color:#ff6060">false</span><span style="color:#ff40ff">)</span> <span style="color:#ffff00">return</span> <span style="color:#ff6060">0</span>;

                <span style="color:#ffff00">return</span> <span style="color:#ff6060">2</span>;
        <span style="color:#ff40ff">}</span>

        <span style="color:#ff40ff">function</span> validMove<span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">space</span><span style="color:#ff40ff">){</span>
                <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">this</span><span style="color:#00ff00">-&gt;</span>board<span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">space</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">==</span><span style="color:#ffff00">=</span> <span style="color:#ff6060">0</span><span style="color:#ff40ff">){</span>
                        <span style="color:#ffff00">return</span> <span style="color:#ff6060">true</span>;
                <span style="color:#ff40ff">}</span> <span style="color:#ffff00">else</span> <span style="color:#ff40ff">{</span>
                        <span style="color:#ffff00">return</span> <span style="color:#ff6060">false</span>;
                <span style="color:#ff40ff">}</span>
        <span style="color:#ff40ff">}</span>

        <span style="color:#ff40ff">function</span> takeTurn<span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">space</span><span style="color:#ff40ff">){</span>
                <span style="color:#ffff00">if</span> <span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">this</span><span style="color:#00ff00">-&gt;</span>validMove<span style="color:#ff40ff">(</span><span style="color:#ffff00">$</span><span style="color:#00ffff">space</span><span style="color:#ff40ff">)){</span>
                        <span style="color:#ffff00">$</span><span style="color:#00ffff">this</span><span style="color:#00ff00">-&gt;</span>board<span style="color:#ff40ff">[</span><span style="color:#ffff00">$</span><span style="color:#00ffff">space</span><span style="color:#ff40ff">]</span> <span style="color:#ffff00">=</span> <span style="color:#ffff00">$</span><span style="color:#00ffff">this</span><span style="color:#00ff00">-&gt;</span>turn;
                        <span style="color:#ffff00">$</span><span style="color:#00ffff">this</span><span style="color:#00ff00">-&gt;</span>turn<span style="color:#ffff00">*=</span> <span style="color:#ff6060">-1</span>;
                        <span style="color:#ffff00">return</span> <span style="color:#ff6060">true</span>;
                <span style="color:#ff40ff">}</span>
                <span style="color:#ffff00">return</span> <span style="color:#ff6060">false</span>;
        <span style="color:#ff40ff">}</span>
<span style="color:#ff40ff">}</span>
<span style="color:#ff40ff">?&gt;</span>
